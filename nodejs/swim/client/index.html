<!DOCTYPE>
<html ng-app="SwimApp">
<head>
    <title>swiM</title>

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="swiM">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="icon" href="/client/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" sizes="57x57" href="/client/favicon57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/client/favicon72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/client/favicon114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/client/favicon144.png" />

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="bootstrap.min.css">
    <link rel="stylesheet" href="index.css">
</head>
<body ng-cloak class="ng-cloak">
    <div class="container" ng-controller="SwimCtrl">
        <nav class="navbar navbar-fixed-top navbar-default">
            <div class="container">
                <div class="navbar-header">
                    <div class="navbar-brand">swiM</div>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li><a href="#" ng-click="views.trainings.show()"><span class="glyphicon glyphicon-th-list" aria-hidden="true"></span></a></li>
                        <li><a href="#" ng-click="views.stats.show()"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span></a></li>
                        <li><a href="#" ng-click="views.graph.show()"><span class="glyphicon glyphicon-signal" aria-hidden="true"></span></a></li>
                        <li><a href="#" ng-click="views.import.show()"><span class="glyphicon glyphicon-cloud-download" aria-hidden="true"></span></a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <div ng-hide="views.trainings.hidden">
            <div class="panel panel-default">
                <div class="panel-body">
                    <table class="table table-condensed">
                        <thead><tr class="active text-info">
                            <th>Date</th>
                            <th>Duration</th>
                            <th>Active</th>
                            <th>Distance</th>
                            <th>Strokes</th>
                            <th>SWOLF</th>
                            <th>Calories</th>
                            <th></th>
                        </tr></thead>
                        <tbody ng-repeat="week in views.trainings.trainings">
                            <tr><td class="text-warning active">Week {{week.week}} - {{week.distance}}m</td></tr>
                            <tr class="active" ng-repeat="training in week.trainingsOfTheWeek">
                                <td ng-click="views.trainings.toggleIntervals(training)"><button type="button" class="text-default btn-link">{{training.startedAt | date: 'dd.MM.yyyy - HH:mm'}}</button></td>
                                <td>{{training.duration | duration}}</td>
                                <td>{{training.activeDuration | duration}}</td>
                                <td>{{training.distance}}m</td>
                                <td>{{training.strokes | number: 0}}</td>
                                <td>{{training.swolf | number: 1}}</td>
                                <td>{{training.calories | number: 0}}</td>
                                <td>
                                    <div class="interval" ng-hide="training.intervalsHidden">
                                        <br>
                                        <table class="table table-condensed">
                                            <thead><tr>
                                                <th>Interval</th>
                                                <th>Stroke Type</th>
                                                <th>Duration</th>
                                                <th>Rest</th>
                                                <th>Distance</th>
                                                <th>Strokes</th>
                                                <th>SWOLF</th>
                                            </tr></thead>
                                            <tbody>
                                                <tr ng-repeat="interval in training.intervals" ng-class="{active: interval.setIdx % 2 === 1}">
                                                    <td>{{$index + 1}}</td>
                                                    <td>{{interval.strokeType}}</td>
                                                    <td>{{interval.duration | duration}}</td>
                                                    <td>{{interval.rest | duration}}</td>
                                                    <td>{{interval.distance}}m</td>
                                                    <td>{{interval.strokes | number: 0}}</td>
                                                    <td>{{interval.swolf | number: 1}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>



        <div ng-hide="views.stats.hidden">
            <div class="panel panel-default">
                <div class="panel-body">
                </div>
            </div>
        </div>

        <div ng-hide="views.graph.hidden">
            <div class="panel panel-default">
                <div class="panel-body">
                    <form class="form-horizontal">
                        <div class="form-group">
                            <div class="col-sm-4">
                                <select class="form-control" ng-model="views.graph.selectedBestTime" ng-options="bestTime._id.distance group by bestTime._id.strokeType for bestTime in views.graph.bestTimes" ng-change="views.graph.showBestTimes(views.graph.selectedBestTime)">
                                    <option value="">Select Type And Distance</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group" ng-hide="views.graph.bestTime === ''">
                            <div class="col-sm-4">
                                All Time Best: {{views.graph.bestTime.best | duration}}
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <div class="panel panel-default" ng-hide="views.graph.bestTime === ''">
                <div class="panel-body">
                    <div class="graphbararea">
                        <div class="graphbaralign"></div>
                        <div class="mark graphbar" ng-repeat="entry in views.graph.bestTimeHistory" ng-style="{height: entry.duration / views.graph.bestTime.worst * 100 + '%'}" tooltip="{{entry.duration | duration}} - {{entry._id | date: 'dd.MM.yyyy'}}"></div>
                    </div>
                </div>
            </div>
        </div>

        <div ng-hide="views.import.hidden">
            <div class="panel panel-default">
                <div class="panel-body">
                    <form class="form-horizontal" ng-hide="views.import.step !== 0">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Garmin Connect Activity ID</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" placeholder="ID" ng-model="views.import.activityId">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-9">
                                <button type="submit" class="btn btn-primary" ng-click="views.import.showActivity()">Import</button>
                            </div>
                        </div>
                    </form>

                    <form class="form-horizontal" ng-hide="views.import.step !== 1">
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Splits JSON</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" placeholder="{}" ng-model="views.import.splitsJson">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-9">
                                <iframe ng-src="{{views.import.splitsUrl}}" width="100%" height="32px" frameBorder="0" scrolling="no"></iframe>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 control-label">Activity JSON</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" placeholder="{}" ng-model="views.import.activityJson">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-9">
                                <iframe ng-src="{{views.import.activityUrl}}" width="100%" height="32px" frameBorder="0" scrolling="no"></iframe>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-9">
                                <button type="submit" class="btn btn-primary" ng-click="views.import.import()">Import</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="http://code.jquery.com/jquery-2.1.4.min.js" type="application/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js" type="application/javascript"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="./ui-bootstrap-tpls-0.13.0.min.js"></script>
    <script src="controllers/controller.js" type="application/javascript"></script>
</body>
</html>
